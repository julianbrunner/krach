#!/bin/sh

dataDirectory="$HOME/.csscript"

source=`mktemp`
directory=`dirname $0`

cat "$directory/../share/header.cs" >> "$source"
tail -n +2 "$1" >> "$source"

dmcs -reference:System.Xml.Linq.dll -reference:"$dataDirectory/Krach/trunk/Source/Krach/bin/Release/Krach.dll" -out:"$source.exe" "$source"

rm "$source"

shift
MONO_PATH="$dataDirectory/Krach/trunk/Source/Krach/bin/Release" mono "$source.exe" "$@"

rm "$source.exe"
